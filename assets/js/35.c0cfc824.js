(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{387:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"stuttura-leaflet"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stuttura-leaflet"}},[t._v("#")]),t._v(" Stuttura Leaflet")]),t._v(" "),s("p",[t._v("Andiamo a vedere come è strutturato il codice "),s("strong",[t._v("Leaflet")]),t._v(" e come è possibile estenderlo per creare nuove funzionalità "),s("a",{attrs:{href:"https://leafletjs.com/examples/extending/extending-1-classes.html",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("link")]),s("OutboundLink")],1)]),t._v(" "),s("p",[s("struttura")],1),t._v(" "),s("p",[t._v("Per poter comprendere meglio come funziona un plugin e come poter personalizzare la nostra applicazione è necessario conoscere le classi basi di Leaflet.")]),t._v(" "),s("h2",{attrs:{id:"l-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#l-class"}},[t._v("#")]),t._v(" L.Class")]),t._v(" "),s("p",[t._v("Come si è visto dalla struttura del codice "),s("strong",[t._v("Leaflet")]),t._v(" "),s("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#class",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("L.Class")]),s("OutboundLink")],1),t._v(" è la classe padre da cui tutte le altre classi derivano (ad eccezione delle classi riguardandi la gestione del DOM e quelle riguardanti LatLng e Bounds).")]),t._v(" "),s("p",[t._v("In aggiunta al modello classico di eredità supportato da Javascript (prototipale), essa introduce alcuni proprietà speciali per organizzare e svliluppare meglio il codice ("),s("strong",[t._v("options")]),t._v(", "),s("strong",[t._v("includes")]),t._v(" e "),s("strong",[t._v("statics")]),t._v(" ad esempio).")]),t._v(" "),s("p",[t._v('Capire come estendere  una classe Leaftlet aggiungendo/sostituendo metodi ci permette di poter creare "Oggetti personalizzati" e magari scrivere plugins che faranno al caso nostro.')]),t._v(" "),s("h3",{attrs:{id:"metodi-eredita"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metodi-eredita"}},[t._v("#")]),t._v(" Metodi (Eredità):")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("L.Class.extend")]),t._v(" : Funzione che prede un oggetto come parametro (attributi e metodi) per "),s("strong",[t._v("estendere")]),t._v(" la classe padre creado una classe figlio con attributi e metodi nuovi. In caso di metodi o attributi comuni, questo non va a redifinire/cambiare gli attributi della classe padre.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("L.Class.include")]),t._v(' : Come sopra ma la differenza è che se ci sono metodi/attributi in comune, sia tutte le attuali istanze create dalla classe padre che tutte le nuove istanze create dalla classe padre "acquisiranno" da quel momento in poi tali funzione/attributi modificati.')]),t._v(" "),s("p",[t._v("Va a modificare direttamente direttamente i metodi e gli attributi del "),s("strong",[t._v("prototype")]),t._v(" della classe padre.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("L.Class.initialize")]),t._v(" : Nella classe Javascript quando viene istanziata una classe viene chiamto il metodo "),s("strong",[t._v("constructor")]),t._v(".\nIn Leaflet L.Class, il metodo constructor viene chiamato "),s("strong",[t._v("initialize")]),t._v(".")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//creo una classe corso che estende la classe base L.Class")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Corso "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Class"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("initialize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("nomecorso")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nomecorso "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nomecorso"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// class constructor")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("presentati")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("Ciao a tutti. Io sono il corso ")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nomecorso"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("`"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// utilizzo le template strings (Javascript)")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//creo un'instaza della classe corso passangli come parametro il nome del corso")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" corso "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Corso")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Leaflet"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Chiamo il metodo presentati che mi restituirà il messaggio")]),t._v("\n\ncorso"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("presentati")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//==> restituirà in console il messaggio 'Ciao a tutti. Io sono il corso Leaflet'")]),t._v("\n\n")])])]),s("p",[s("strong",[t._v("Esempio L.extend")])]),t._v(" "),s("class-extend"),t._v(" "),s("h3",{attrs:{id:"attributi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#attributi"}},[t._v("#")]),t._v(" Attributi:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("options")]),t._v(":  E' un attributo speciale (oggetto javascript) che permette configurare la classe con dei valori di default quando questi non sono forniti al momento della creazione dell'istanza")])]),t._v(" "),s("p",[s("strong",[t._v("Esempio options")])]),t._v(" "),s("class-options"),t._v(" "),s("h3",{attrs:{id:"chiamare-un-metodo-della-classe-padre"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chiamare-un-metodo-della-classe-padre"}},[t._v("#")]),t._v(" Chiamare un metodo della Classe Padre")]),t._v(" "),s("p",[t._v("E' possibile chiamare il metodo della classe padre all'interno della classe figlio mediante la propietà "),s("strong",[t._v("prototype")]),t._v(" (Javascript) della classe Padre.")]),t._v(" "),s("p",[t._v("Un esempio di come è scritta la classe L.FeatureGroup che è una sotto classe di L.LayerGroup:")]),t._v(" "),s("p",[t._v("Esempio:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FeatureGroup "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LayerGroup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("addLayer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("layer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LayerGroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addLayer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" layer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("removeLayer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("layer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LayerGroup")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeLayer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" layer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),s("p",[s("strong",[t._v("Nota")]),t._v(": La differenza tra i metodi "),s("strong",[t._v(".call")]),t._v(" e "),s("strong",[t._v(".apply")]),t._v(" di una funzione in Javascript è che il primo accetta una sequenza di argomenti seperati da virgola, mentre il secondo accetta un array di argomenti.")]),t._v(" "),s("h2",{attrs:{id:"inithook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#inithook"}},[t._v("#")]),t._v(" initHook")]),t._v(" "),s("p",[t._v("Se vogliamo che la nostra classe compia un'azione durante la fase di inizializzazione, questo è possibile farlo tramite il metodo "),s("strong",[t._v("addInitHook")]),t._v(" della Classe.")]),t._v(" "),s("p",[t._v("Ci permette di intervenire durante l'inizializzazione di una classe di Leaflet.")]),t._v(" "),s("p",[t._v("Se si passa una funzione è importante ricorardi che "),s("strong",[t._v("this")]),t._v(" si riferisce all'istanza della classe a cui abbiamo invocato il metodo **"),s("em",[t._v("initHook")])]),t._v(" "),s("p",[t._v("Si possono utilizzare due modi:")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("Classe.initHook(function(){......})")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addInitHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* <this> si riferisce all'instanza della classe.\n     quindi potremmo registrare gli eventi che il nostro plugin utilizzerà per fare qualcosa\n     Es:\n     this.on('zoommend', ()=>{ fai qualcosa})\n    */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[s("strong",[t._v("Classe.addInitHook('metodo della classe', parametri)")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("L")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("initHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'setZoom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"funzione-factory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#funzione-factory"}},[t._v("#")]),t._v(" Funzione Factory")]),t._v(" "),s("p",[t._v("Come avrete notato Leaflet ha due possibilità di creare un'istanza di classe.")]),t._v(" "),s("ul",[s("li",[t._v("Tramite "),s("strong",[t._v("new")]),t._v(" L.NomeClasse")]),t._v(" "),s("li",[t._v("Tramite la funzione "),s("strong",[t._v("Factory")]),t._v(" associata alla classe L.nomeclasse (in minuscolo)")])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);