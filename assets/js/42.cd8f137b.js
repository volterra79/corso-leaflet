(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{397:function(e,a,t){"use strict";t.r(a);var r=t(25),o=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"layers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layers"}},[e._v("#")]),e._v(" Layers")]),e._v(" "),t("h2",{attrs:{id:"ordinamento-dei-layer-nella-mappa"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ordinamento-dei-layer-nella-mappa"}},[e._v("#")]),e._v(" Ordinamento dei layer nella mappa")]),e._v(" "),t("p",[e._v("Come in ogni software grafico e GIS l’ordine di rappresentazione dei layer è un elemento fondamentale per la corretta visualizzazione dei loro contenuti.")]),e._v(" "),t("p",[e._v("La logica è semplice:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("le basi cartografiche di sfondo ("),t("strong",[e._v("baselayers")]),e._v("), come ad esempio il layer OpenStreetMap, un DTM etc .. occuperanno la posizione più bassa della pila di layers")])]),e._v(" "),t("li",[t("p",[e._v("gli strati contenenti elementi poligonali stanno al di sotto di quelli contenenti elementi lineari ("),t("strong",[e._v("overlay")]),e._v(")")])]),e._v(" "),t("li",[t("p",[e._v("gli strati con elementi lineari stanno al di sotto di quelli contenenti elementi puntuali ("),t("strong",[e._v("overlay")]),e._v(")")])]),e._v(" "),t("li",[t("p",[e._v("gli starti puntuali stanno al di sopra di ogni layer ("),t("strong",[e._v("overlay")]),e._v(")")])]),e._v(" "),t("li",[t("p",[e._v("elementi grafici(tooltip, etc ..) al di sopra di tutto")])])]),e._v(" "),t("img",{attrs:{src:"/corso-leaflet/assets/img/layers_stack.png",title:"Pila dei layer"}}),e._v(" "),t("h2",{attrs:{id:"map-panes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#map-panes"}},[e._v("#")]),e._v(" Map Panes")]),e._v(" "),t("p",[e._v("Leaflet utilizza il concetto di "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#map-pane",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("Map Panes")]),t("OutboundLink")],1),e._v(" per l'ordinamento dei layers su mappa.")]),e._v(" "),t("p",[t("strong",[e._v("Panes")]),e._v(' non sono altro che elementi DOM che sono utlizzati per gestire l\'ordine "piramidale" o di "stack" degli elementi all\'interno della mappa.')]),e._v(" "),t("p",[e._v("E' possibile recuperare i Panes della mappa tramite i metodi "),t("strong",[e._v("map.getPane")]),e._v(" or "),t("strong",[e._v("map.getPanes")]),e._v(" oppure creare un nuovo pane tramite il metodo "),t("strong",[e._v("map.createPane")]),e._v(".")]),e._v(" "),t("p",[e._v("Leaflet segue questo ordine:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("TileLayers e GridLayers")])]),e._v(" "),t("li",[t("p",[e._v("Paths, polylines, GeoJSON layers, etc.. layer vettoriali")])]),e._v(" "),t("li",[t("p",[e._v("Marker")])]),e._v(" "),t("li",[t("p",[e._v("Popups")])])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://leafletjs.com/examples/map-panes/",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("Tutorial Leaflet")]),t("OutboundLink")],1)]),e._v(" "),t("map-panes"),e._v(" "),t("h2",{attrs:{id:"layer-raster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layer-raster"}},[e._v("#")]),e._v(" Layer Raster")]),e._v(" "),t("p",[e._v("I layer Raster gestiti dal core di Leaflet sono:")]),e._v(" "),t("ul",[t("li",[e._v("Tile Layer "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#tilelayer",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("link")]),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("Layer WMS "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#tilelayer-wms",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("link")]),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("Image Overlay "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#imageoverlay",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("link")]),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"esempio-wms"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#esempio-wms"}},[e._v("#")]),e._v(" Esempio WMS")]),e._v(" "),t("p",[t("wmslayer")],1),e._v(" "),t("p",[e._v('Se guardiamo bene come viene visualizzato il layer WMS, notiamo che invece di una singola immagine vengono richieste "tile" di 256px per 256px che vanno a comporre il layer WMS.')]),e._v(" "),t("p",[e._v("Questo è dovuto al fatto che "),t("strong",[e._v("L.tileLayer.WMS")]),e._v(" è una sotto classe di "),t("strong",[e._v("L.tileLayer")]),e._v(" e quindi verranno effettuate n richieste di "),t("strong",[e._v("GetMap")]),e._v(" al server composte ognuna da un'immagine di 256px 256px.")]),e._v(" "),t("p",[e._v("Più avanti quando andremo a parlare di Plugins, vediamo come richiedere una singola immagine invece che molte piccole immagini.")]),e._v(" "),t("h2",{attrs:{id:"layer-vettoriali"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layer-vettoriali"}},[e._v("#")]),e._v(" Layer Vettoriali")]),e._v(" "),t("p",[e._v("In Leaflet ogni oggetto aggiunto alla mappa viene considerato un Layer (Poligoni, Linee, etc ..);")]),e._v(" "),t("p",[e._v("Di seguito le diverse tipologie di geometria che un layer può avere "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#path",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("link")]),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("L.circle")]),e._v(" Disegna un cerchio. Deve essere passato come primo argomento il punto in mappa (latitudine, longitudine)")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("L.polyline")]),e._v(" Disegna una linea. Deve essere passato come primo argomento un array di coordinate geografiche")])])]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("lat1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" lon1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("lat2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" lon2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),t("ul",[t("li",[t("p",[t("strong",[e._v("L.polygon")]),e._v(" Disegna un poligono. Deve essere passato come primo argomento un array di coordinate geografiche  (possibile costruire buchi o multipoligoni)")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("L.rectangle")]),e._v(" Disegna un rettangolo. Deve essere passato come primo argomento un array contenete i due punti che definiscono i due punti opposti della diagonale.")])])]),e._v(" "),t("p",[e._v("ed altri ancora.")]),e._v(" "),t("p",[e._v("Tutti i Layers sopra accettano poi un secondo parametro che permette di gestire lo stile del layer.")]),e._v(" "),t("h3",{attrs:{id:"stili"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stili"}},[e._v("#")]),e._v(" Stili")]),e._v(" "),t("p",[e._v("La visualizzazione grafica del layer su mappa è uno degli aspetti importanti nella creazione di una mappa di facile lettura.\nLeaflet, come Openlayers, utilizza una colorazione di default (di solito blu)  per visualizzare ogni tipo di layer vettoriale su mappa.")]),e._v(" "),t("p",[e._v("Per poter distingure elementi di una tipologia rispetto ad un'altra o far capire l'entità di un determinato fenomeno rispetto ad un altro è necessario ricorrere ad una personalizazzione dello stile del layer.")]),e._v(" "),t("p",[e._v("Come secondo argomento nella creazione del layer è possibile passare un oggetto javascript contenete varie opzioni per visualizzare il nostro layer.")]),e._v(" "),t("p",[e._v("L'oggetto passatto sarà utile a costruire lo stile che non è altro a seconda del layer un'estensione della classe astratta "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#path",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("L.path")]),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("vector-style"),e._v(" "),t("p",[e._v("Infine ogni "),t("strong",[e._v("Layer")]),e._v(" è un'estensione della classe base "),t("strong",[e._v("L.Path")]),e._v(" e quindi ne deriva che in ogni momento possiamo settare lo style attraverso la funzione "),t("em",[e._v("setStyle")])]),e._v(" "),t("h2",{attrs:{id:"layer-geojson"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layer-geojson"}},[e._v("#")]),e._v(" Layer GeoJSON")]),e._v(" "),t("p",[e._v("Un altro tipo di layer vettoriale che viene spesso utilizzato nei progetti è scuramente il tipo "),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#geojson",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("GeoJSON")]),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("Come primo argomento si deve passare il dato in formato "),t("strong",[e._v("GeoJSON")]),e._v(". Come secondo argomento (opzionale) può essere passato un oggetto Javascript.")]),e._v(" "),t("p",[t("strong",[e._v("Nota")]),e._v(": Leaflet intende i dati GeoJSON in WGS84 (latitudine, longitudine).")]),e._v(" "),t("layer-geojson"),e._v(" "),t("p",[e._v("Un'interessante proprietà del layer GeoJSON è la possibilità di personalizzare lo style di ogni feature ad esempio in base alle proprietà della feature stessa.")]),e._v(" "),t("p",[e._v("Passando come secondo argomento un oggetto Javascript contenente la chiave "),t("strong",[e._v("style")]),e._v(" è possibile gestire lo stile. Questa deve essere una funzione che accetta come parametro la feature del geoJSON.")]),e._v(" "),t("p",[e._v("In questo modo possiamo andare a verificare la proprietà specifica della feature e ritornare l'oggetto style (vedi esempio sopra) che deve essere applicato a quel tipo di feature specifica.")]),e._v(" "),t("p",[e._v("Infine da osservare che "),t("strong",[e._v("L.geoJSON")]),e._v(" accetta come primo argomento i dati in formato GeoJSON.")]),e._v(" "),t("p",[e._v("Se abbiamo bisogno di recuperare i dati da un servizio è necessario fare prima la chiamata al server e poi creare il layer geoJSON")]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//Esempio con JQuery")]),e._v("\n\n$"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("getJSON")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"orders.json"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token constant"}},[e._v("L")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("geoJson")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//parametri")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("addTo")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("map"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),t("h2",{attrs:{id:"layer-ui"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#layer-ui"}},[e._v("#")]),e._v(" Layer UI")]),e._v(" "),t("p",[e._v("In Leaflet oltre ai layers standard "),t("strong",[e._v("Vettoriali")]),e._v(" e "),t("strong",[e._v("Raster")]),e._v(", esiste una terza categoria di Layer: I "),t("strong",[e._v("Layer UI")]),e._v(' o "Grafici" '),t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#marker",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("link")]),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("Sono trattati allo stesso modo degli altri layers e rientrano in questa categoria:")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#marker",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("L.marker")]),t("OutboundLink")],1),e._v(" che non è altro che un layer puntuale con la caratteristica di stile del marker")])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#popup",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("L.popup")]),t("OutboundLink")],1),e._v(" per la visualizzazione dei popup su mappa")])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#tooltip",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("L.tooltip")]),t("OutboundLink")],1),e._v(" Visualizzazione di brevi testi "),t("strong",[e._v("tooltip")]),e._v(" sui vari layer della mappa.")])])]),e._v(" "),t("marker-popup-tooltip"),e._v(" "),t("h2",{attrs:{id:"concetto-di-layer-e-feature-in-leaflet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#concetto-di-layer-e-feature-in-leaflet"}},[e._v("#")]),e._v(" Concetto di Layer e Feature in Leaflet")]),e._v(" "),t("p",[e._v("A differenza di Openlayers e del mondo GIS, dove esitono concetti di "),t("strong",[e._v("Layer")]),e._v(" e "),t("strong",[e._v("Feature")]),e._v(" in Leaflet esite il concetto di "),t("strong",[e._v("Layer")]),e._v(".")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#layergroup",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("LayerGroup")]),t("OutboundLink")],1),e._v(" Questo permette di raggruppare più layers trattandoli come unico layer. In pratica il gruppo diventa il layer contenitore, mentre i layers saranno le features appartinenti al layer.")])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://leafletjs.com/reference-1.7.1.html#featuregroup",target:"_blank",rel:"noopener noreferrer"}},[t("strong",[e._v("FeatureGroup")]),t("OutboundLink")],1),e._v(" Estende il concetto di LayerGroup")]),e._v(" "),t("ul",[t("li",[e._v("il metodo "),t("strong",[e._v("bindPopup")]),e._v(" permette di associare il popup a tutti i layer in una volta invece che doverlo associare ad ogni singolo layer (lo stesso vale per il metodo bindTooltip)")]),e._v(" "),t("li",[e._v("Gli "),t("strong",[e._v("Events")]),e._v(" (Eventi) sono propagati su ogni layer appartenente al FeatureGroup, così se il gruppo ha un gestore di eventi, verrà gestito per ogni layer (include anche l'evento mouse e eventi custom).")]),e._v(" "),t("li",[e._v("Ha l'evento "),t("strong",[e._v("layeradd")]),e._v(" e "),t("strong",[e._v("layerremove")])])])])]),e._v(" "),t("p",[e._v("Esempio "),t("strong",[e._v("LayerGroup")]),e._v(" e "),t("strong",[e._v("FeatureGroup")])]),e._v(" "),t("layergroup-featuregroup")],1)}),[],!1,null,null,null);a.default=o.exports}}]);